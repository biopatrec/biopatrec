#summary Feature extraction

= Feature extraction =

Although there are few PatRec algorithms that can be feed directly with time series, such as myoelectric signals, the vast majority require discrete values. In our case, these signal features are extracted from fixed time windows, or signal segmentation, handle by SigTreatment.

See BioPatRec_StartupGuide for quick user instructions and BioPatRec_Roadmap for an overview of the functions involved.

== Features ==

These are some of the available signal features

|| *ID*    || *Feature*           || *Domain* ||
|| tmn     || Mean                || Time || 
|| tmabs   || Mean absolute value || Time ||
|| tmd     || Median              || Time ||
|| tstd    || standard deviation  || Time ||            
|| tvar    || Variance            || Time ||            
|| twl     || Waveform length     || Time ||          
|| trms    || RMS                 || Time ||
|| tzc     || Zero-crossing       || Time ||
|| tpks    || Peaks (over RMS)    || Time ||
|| tmpks   || Peaks mean          || Time ||
|| tmvel   || Mean  velocity      || Time || 
|| tslpch1 || Slope changes (peaks)|| Time ||      
|| tslpch2 || Slope changes (diff) || Time ||        
|| tpwr    || Power               || Time ||
|| tren    || Rough entropy       || Time ||
|| tcr     || Correlation         || Time || 
|| tcv     || Co-variance         || Time ||
|| fwl     || Waveform length     || Frequency ||
|| fmn     || Mean                || Frequency ||   
|| fmd     || Median              || Frequency ||
|| fpmn    || Peaks mean (Top 5)  || Frequency ||
|| fpmd    || Peaks median (Top 5)|| Frequency ||
|| fpstd   || Peaks std (Top 5)   || Frequency ||

The [GUI_PatRec] includes sets of the top features, or more commonly used, for their easy selection before PatRec.

== Implementation ==

 * The GetAllSigFeatures function is the base of [sigFeatures] and populates the [xFeatures] by calling GetSigFeatures
  * Input:
   * handles (from the GUI)
   * [sigTreated]
  * Output:
   * [sigFeatures]

 * GetSigFeatures computes all the requested features in fID.
  * Input:
   * data(Samples x Channels)
   * sF (sampling frequency)
   * fID (Vector of cells with the features ID)
  * Output:
   * xFeatures
  * This funtion call the specific funtions to compute each feature using :
   * pF (structure received by each function to compute a feature)
    * pF.ch (channels)
    * pF.sp (samples)
    * pF.sF (sampling frequency)
    * pF.data (Samples x Channels)
    * pF.absdata (Samples x Channels)
    * pF.f ([xFeatures], a structure with all the computed features)

= Adding a new feature =

Adding new signal features is very simple, you only need to:

 # Add the ID (_tXXX_) in the _fID_ vector in GetSigFeatures
 # Create a function call "_GetSigFeatures_tXXX_" that receives pF, and returns _pF.f.tXXX = your feature values_.

You can see the other "_GetSigFeatures_tXXX_" function as an example.

NOTE: If you consider that part of your computation would be useful for another feature, you can add it in pF. (e.g. {{{GetSigFeatures_tpks}}})